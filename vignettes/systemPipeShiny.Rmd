---
title: "systemPipeShiny" 
author: "Author: Daniela Cassol (danielac@ucr.edu) and Thomas Girke (thomas.girke@ucr.edu)"
date: "Last update: `r format(Sys.time(), '%d %B, %Y')`" 
output:
  BiocStyle::html_document:
    toc_float: true
    code_folding: show
  BiocStyle::pdf_document: default
package: systemPipeR
vignette: |
  %\VignetteIndexEntry{RIBO-Seq Workflow Template}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
fontsize: 14pt
bibliography: bibtex.bib
---

```{css, echo=FALSE}
pre code {
white-space: pre !important;
overflow-x: scroll !important;
word-break: keep-all !important;
word-wrap: initial !important;
}
```

```{r style, echo = FALSE, results = 'asis'}
BiocStyle::markdown()
options(width=60, max.print=1000)
knitr::opts_chunk$set(
    eval=as.logical(Sys.getenv("KNITR_EVAL", "TRUE")),
    cache=as.logical(Sys.getenv("KNITR_CACHE", "TRUE")), 
    tidy.opts=list(width.cutoff=60), tidy=TRUE)
```

```{r setup, echo=FALSE, messages=FALSE, warnings=FALSE, eval=FALSE}
suppressPackageStartupMessages({
    library(systemPipeR)
})
```

# Internal annotation

## Title

Accelerate data analysis with interactive systemPipeShiny toolkits

## Image
![systemPipeShiny](./systemPipeShiny.png)

- [Image Link edition](https://drive.google.com/file/d/1kRG_QGbB0w3tgQh17hJtFqXrF5gwI9Tv/view?usp=sharing)

## Features

### systemPipeShiny: Shiny Web Interface
Shiny application for interactive workflow management and results visualization generated by *systemPipeR*

- Interactive workflow management
Create metadata from new or templates; checkers to help users validate target file (names, file existence, statistics)

- Visualize workflow structure, choose steps 
Interactive data visualization
Plots of downstream analysis, like DEG, GO and other plots used in some specific workflows, like Venn diagram, dendrogram


## Poster/Abstract
systemPipeR, an R/Bioconductor package, provides a reproducible and user-friendly analysis workflow environment. In order to accelerate the user analysis process, we have developed systemPipeR templates and an interactive web application, systemPipeShiny. 
To enhance user experience on data visualization and to help new users to familiarize the workflow environment, we developed SystemPipeShiny as a Shiny based web application. Users can interactively manage workflow files, like helping to validate workflow file requirements, visualizing workflow structure and choosing steps. A customized ready-to-run workflow environment can be created in a few clicks and a few input typing with this app. 
Also, once the initial results are obtained from workflow running, one can use this app to do downstream analysis and visualization. Analysis like, but not limited to,  differentially expressed gene analysis, gene ontology enrichment can be done in this app. Visualizing and refining plots and be as easy as tweaking some buttons in this app. By combining our templates and our app, data analysis in the systemPipeR environment will be more efficient and data exploration will be more interactive.
This poster gives an overview of both existing and upcoming features of systemPipeShiny.

These workflows are preconfigured and ready-to-use. By following guidelines from systemPipeR, users can easily customize these workflows to their own analysis. Templates are well organized and easy-to-download/install under the systemPipeR Github organization. We also provide Rstudio integration which enables workflow generation only requires a few clicks with our templates.

Keywords:  workflow environment, automation, interactive visualization, reporting infrastructure

# Introduction

Describe the package
Motivation 

```{r, eval=FALSE}
library(systemPipeShiny)
```

## Quick start

```{r, eval=FALSE}
shiny::runApp("../")
```

# Install

```{r, eval=FALSE}
if (!requireNamespace("BiocManager", quietly=TRUE))
    install.packages("BiocManager")
BiocManager::install("systemPipeR/systemPipeShiny", build_vignettes=TRUE, dependencies=TRUE)
```

# Setting up the data

# Launching the application

# Description of the user interface

# Description of *systemPipeShiny* functionality

## Workflow Management system

## Visualization 

# How to custom the Visualization Tab

## 1. App structure

1. Directories:
    1. docs: `pagedown` docs, used to generate project website, can be ignored for app
    2. inst/extdata: example datasets 
    3. R: all functions
    4. vignettes: manuals for the app
    5. www: html web resources
    
## 2. Important files    

1. Three big files in the main directory:
    - **global**: all sourcing, load library, global variables.
    - **server**: top level server function, logic of global and the dash; load all submodule server functions.
    - **ui**: top level UI, load all submodule UIs.

## 3. Naming

1. submodules:
    - all store in `R` folder;
    - all should be named as `tab_xx.R`; if a submodule contains submodule, it the submodule that calls other submodules should
    be named as `tab_xx_main.R` and sub-submodules been called should be `tab_xx_xxx.R`.
    
2. functions:
    - in each *tab* file, there should be one `UI` function and one `server` function and give both functions and name space the same ID as the file name: 
    e.g. a file named `tab_sub1.R`, UI function will be `sub1UI`, server will be `sub1Server` and in top level UI and server call them `sub1UI("sub1", ...)`, `callModule(tab1Server, "tab1", ...)`.

## 4. Standard for visualization

1. file uploading:
    - Default uploading size is 5MB. Meanwhile, some files, like count table are larger than 5, in this case, need to use `Textinput` bar to specify a path or customize a function using `file.choose()`. (We can only choose one, need to be discussed)
    
2. Workflows
    - Workflows only work like dictionaries to direct users to different. 
    
3. Plots
    - In princple, datasets should be plotting ready (no need to preprocess data). 
    - For some plots that are very specific to some workflows, simple preprocess is okay.
    - Always use a button to update (re-plot) the graph, realtime rendering can be expensive. 


# How to deploy the application

# Version Information

```{r sessionInfo}
sessionInfo()
```

# Funding

# References
